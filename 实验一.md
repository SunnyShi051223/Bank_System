# 实验一

![image-20251021223121193](C:\Users\15231\AppData\Roaming\Typora\typora-user-images\image-20251021223121193.png)

![image-20251022113501387](C:\Users\15231\AppData\Roaming\Typora\typora-user-images\image-20251022113501387.png)

![image-20251021223148161](C:\Users\15231\AppData\Roaming\Typora\typora-user-images\image-20251021223148161.png)

risv指令格式：
![image-20251021230528618](C:\Users\15231\AppData\Roaming\Typora\typora-user-images\image-20251021230528618.png)

##### 1.指令跳转jal

a = fun1(a, 0xFFFFFFE4, 0xFE, s);

80000144:   li      a2,254 要对这个进行拆解。

使用jal指令转到200： 偏移地址字节数：0x200-0x144 = 12+11*16 = 188 

x1表示ra，用来保存回来以后的地址。

汇编表示 jal ra 188

2进制表示如下：

![image-20251021224316152](C:\Users\15231\AppData\Roaming\Typora\typora-user-images\image-20251021224316152.png)



转化为16进制表示为：0x 0b c0 00 ef 

##### 2.a>>3

根据上面80000100-8000013c这一段汇编解析如下：

a5用来存立即数的 表示 i,  li      a5,1表示for循环的++；然后lbu     a2,1028(a5) # 0x80000404 。读一个字节，说明不是int是char ,那对应的就是p 那么后面的lw用的a4寄存器寄存的a的值。后面没有破坏a4的操作，所以还在里面，因此直接进行移动位置就可以。

算数右移，且位数自定，使用srai

则汇编为srai a4 a4 3

二进制表示如下：

![image-20251021230205501](C:\Users\15231\AppData\Roaming\Typora\typora-user-images\image-20251021230205501.png)

16进制表示为0x 40 37 57 13

这个指令在0x80000200开始 ，而且 要从13开始反着写。写法如下：



##### 3.a>>3 - 10 

这是一个简单的addi指令，减10直接加-10就好。

同样存在a4寄存器中，没有变化

汇编代码 ： addi a4 a4 -10

二进制表示：

![image-20251021230733486](C:\Users\15231\AppData\Roaming\Typora\typora-user-images\image-20251021230733486.png)

16进制表示0x ff 67 07 13

这个指令从0x80000204开始存，占四字节。写法和上面一样。

##### 4.a = a>>3 - 10 

这一步将a存到内存中 a的地址是 0x80000400 ,在8000013c:   sw      a4,1024(a5) # 0x80000400这个指令中有所体现。

由于a5在80000138:   lui     a5,0x80000与80000120:   lui     a5,0x80000均被修改为0x80000,因此a5还是作为基地址，使用a5作为偏移基地址

汇编变为sw a4 1024(a5)。将a存入 0x80000400的内存。

![image-20251021232348507](C:\Users\15231\AppData\Roaming\Typora\typora-user-images\image-20251021232348507.png)

16进制为0x 40 e7 a0 23

这个指令接着往下顺延。

##### 5.80000144:   li      a2,254

破坏的这条指令要恢复，由于254在[-2048,2047]的范围，所以和addi是等价的

汇编转化为 addi a2 x0 254。

汇编和原来那个一样，转化为：0x0F E0 06 13

6.跳转回去ret指令

转化为jalr x0 0(ra) 不保存返回地址。直接到ra

![image-20251022112249421](C:\Users\15231\AppData\Roaming\Typora\typora-user-images\image-20251022112249421.png)

转化为汇编0x 00 00 80 67

##### 6.28偏移改成32

li      a1,-28 改成 li  a1 -32

则机器码从0x fe 40 05 93  进行转变为 0x fe 00 05 93 

![image-20251022113336158](C:\Users\15231\AppData\Roaming\Typora\typora-user-images\image-20251022113336158.png)

##### 7.fun1变为fun2

jal ra 4c转化为jal ra 6c

转化为





